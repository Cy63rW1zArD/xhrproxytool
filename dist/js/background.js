!function(){"use strict";window.XHRPT={init:function(){var e=this;e.initConnect()},initConnect:function(){var e=this;chrome.extension.onConnect.addListener(function(n){switch(n.name){case"send-request":e.sendRequeseHandler(n)}})},sendRequeseHandler:function(e){e.onMessage.addListener(function(n){var t=new XMLHttpRequest,s="",o=n.method.toLowerCase(),i=n.url,a=n.headers||{};a["Content-Type"]||(a["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8");for(var r in n.data)s&&(s+="&"),s+=r+"="+n.data[r];"get"===o?s&&(i+="?"+s):"application/json"===a["Content-Type"]&&(s=JSON.stringify(n.data)),t.open(o,i,!0);for(var d in a)t.setRequestHeader(d,a[d]);t.onload=function(){chrome.tabs.sendRequest(e.sender.tab.id,{name:"send-request-res",data:t.responseText})},t.send(s)})}},window.XHRPT.init()}();