!function(){"use strict";window.XHRPT={init:function(){var e=this;e.initConnect()},initConnect:function(){var e=this;chrome.extension.onConnect.addListener(function(t){switch(t.name){case"send-request":e.sendRequestHandler(t)}})},sendRequestHandler:function(e){e.onMessage.addListener(function(t){var n=new XMLHttpRequest,a="",s=t.method.toLowerCase(),o=t.url,r=t.headers||{};r["Content-Type"]||(r["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8");for(var i in t.data)a&&(a+="&"),a+=i+"="+t.data[i];if("get"===s)a&&(o+="?"+a);else if("application/json"===r["Content-Type"])a=JSON.stringify(t.data);else if("multipart/form-data"===r["Content-Type"]){var d=new FormData;Object.keys(t.data).forEach(function(e){d.append(e,t.data[e])}),a=d}n.open(s,o,!0);for(var c in r)n.setRequestHeader(c,r[c]);n.onreadystatechange=function(){if(4===this.readyState){var a={},s=["readyState","response","responseText","responseType","responseURL","responseXML","status","statusText","timeout","withCredentials"];s.forEach(function(e){a[e]=n[e]}),chrome.tabs.sendRequest(e.sender.tab.id,{name:"send-request-res",data:n.responseText,reqData:t,xhr:a})}},n.send(a)})}},window.XHRPT.init()}();