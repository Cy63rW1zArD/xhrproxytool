!function(){"use strict";window.XHRPT={init:function(){var e=this;e.initConnect()},initConnect:function(){var e=this;chrome.extension.onConnect.addListener(function(t){switch(t.name){case"send-request":e.sendRequestHandler(t)}})},sendRequestHandler:function(e){e.onMessage.addListener(function(t){var n=new XMLHttpRequest,a="",s=t.method.toLowerCase(),i=t.url,o=t.headers||{};o["Content-Type"]||(o["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8");for(var r in t.data)a&&(a+="&"),a+=r+"="+t.data[r];if("get"===s)a&&(i+="?"+a);else if("application/json"===o["Content-Type"])a=JSON.stringify(t.data);else if("multipart/form-data"===o["Content-Type"]){var d=new FormData;Object.keys(t.data).forEach(function(e){d.append(e,t.data[e])}),a=d}n.open(s,i,!0);for(var c in o)n.setRequestHeader(c,o[c]);n.onreadystatechange=function(){4===this.readyState&&chrome.tabs.sendRequest(e.sender.tab.id,{name:"send-request-res",data:n.responseText,reqData:t,xhr:n})},n.send(a)})}},window.XHRPT.init()}();