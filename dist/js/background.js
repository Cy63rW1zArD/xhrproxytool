!function(){"use strict";window.XHRPT={init:function(){var e=this;e.initConnect()},initConnect:function(){var e=this;chrome.extension.onConnect.addListener(function(t){switch(t.name){case"send-request":e.sendRequestHandler(t)}})},sendRequestHandler:function(e){e.onMessage.addListener(function(t){var n=new XMLHttpRequest,a="",s=t.method.toLowerCase(),i=t.url,r=t.headers||{};r["Content-Type"]||(r["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8");for(var o in t.data)a&&(a+="&"),a+=o+"="+t.data[o];if("get"===s)a&&(i+="?"+a);else if("application/json"===r["Content-Type"])a=JSON.stringify(t.data);else if("multipart/form-data"===r["Content-Type"]){var d=new FormData;Object.keys(t.data).forEach(function(e){d.append(e,t.data[e])}),a=d}n.open(s,i,!0);for(var c in r)n.setRequestHeader(c,r[c]);n.onreadystatechange=function(){4===this.readyState&&(200===this.status?chrome.tabs.sendRequest(e.sender.tab.id,{name:"send-request-res",data:n.responseText,reqData:t}):chrome.tabs.sendRequest(e.sender.tab.id,{name:"send-request-res",reqData:t}))},n.send(a)})}},window.XHRPT.init()}();