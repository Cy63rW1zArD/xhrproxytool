!function(){"use strict";window.XHRPT={init:function(){var e=this;e.initConnect()},initConnect:function(){var e=this;chrome.extension.onConnect.addListener(function(t){switch(t.name){case"send-request":e.sendRequestHandler(t)}})},sendRequestHandler:function(e){e.onMessage.addListener(function(t){var n=new XMLHttpRequest,s="",a=t.method.toLowerCase(),i=t.url,r=t.headers||{};r["Content-Type"]||(r["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8");for(var o in t.data)s&&(s+="&"),s+=o+"="+t.data[o];"get"===a?s&&(i+="?"+s):"application/json"===r["Content-Type"]&&(s=JSON.stringify(t.data)),n.open(a,i,!0);for(var d in r)n.setRequestHeader(d,r[d]);n.onreadystatechange=function(){4===this.readyState&&(200===this.status?chrome.tabs.sendRequest(e.sender.tab.id,{name:"send-request-res",data:n.responseText,reqData:t}):chrome.tabs.sendRequest(e.sender.tab.id,{name:"send-request-res",reqData:t}))},n.send(s)})}},window.XHRPT.init()}();